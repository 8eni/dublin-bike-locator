(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},221:function(e,t,a){},223:function(e,t,a){"use strict";a.r(t);a(92);var n=a(0),r=a.n(n),i=a(30),o=a(49),s=a.n(o),l=a(79),c=a(14),u=a(15),m=a(17),d=a(16),p=a(18),h=a(9),b=a(225),f=a(226),y=a(4),g=(a(100),{dbBaseUrl:"https://api.jcdecaux.com/vls/v1/",dbContract:"Dublin",dbApiKey:"bbbdbe0c576a57bd979453af7228f03a88759b13",google_maps_api_key:"AIzaSyAveGIhntsi_rM377-o6ILDazuE3NRgrBc"}),v=a(8),E=a.n(v),k=a(13),x=a.n(k),S=a(81),j=a.n(S),O=a(82),w=a.n(O),T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).createTable=function(e,t){for(var a=[],n=0;n<e;n++)a.push(r.a.createElement(E.a,{item:!0,xs:6,key:n,align:1===Math.abs(n%2)?"left":"right",className:"stand ".concat(t>n?"bike":"nobike")},r.a.createElement("span",null,n+1)));return a},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.bikeStands,a=e.availableBikes;return r.a.createElement(E.a,{container:!0,item:!0,xs:12,className:"bike-stand-container"},this.createTable(t,a))}}]),t}(n.Component);var N=Object(y.withStyles)(function(e){return{currentStation:{backgroundColor:e.palette.secondary.main800}}})(function(e){var t=e.classes,a=e.stationDetails,n=e.stationId;return r.a.createElement("tr",{className:a.number===n?t.currentStation:""},r.a.createElement("td",null,a.address),r.a.createElement("td",null,a.available_bike_stands),r.a.createElement("td",null,a.available_bikes),r.a.createElement("td",null,a.distance," km"))}),C=Object(y.withStyles)(function(e){return{root:{color:e.palette.secondary.main100}}})(function(e){var t=e.classes,a=e.stations,n=e.currentStationId,i=e.showCount;return r.a.createElement("table",{className:t.root},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{align:"left"},"Station"),r.a.createElement("th",{align:"left"},"Stands"),r.a.createElement("th",{align:"left"},"Bikes"),r.a.createElement("th",{align:"left"},"km"))),r.a.createElement("tbody",null,a.map(function(e,t){return t<parseInt(i)&&r.a.createElement(N,{key:t,stationDetails:e,stationId:n})})))});var M=Object(y.withStyles)(function(e){return{root:{flexGrow:1,background:"#212121",color:"#fff"},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},grid:{borderBottom:"solid 1px #424242",color:"#fff"},text:{color:"#fff"},gridContainer:{padding:"10px"},table:{width:"100%",fontSize:"12px"},bike:{color:"#ff3d00"},grey:{color:"#9e9e9e",fontSize:"18px"}}})(function(e){var t=e.classes,a=e.stations,n=e.currentStation;return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,{className:t.gridContainer,container:!0},r.a.createElement(E.a,{className:t.grid,item:!0,xs:8},r.a.createElement(E.a,{className:t.grid,container:!0,item:!0,xs:12},r.a.createElement(E.a,{item:!0,xs:6},r.a.createElement(x.a,{className:t.text,align:"center"},"Stands"),r.a.createElement(x.a,{className:t.text,variant:"h6",align:"center"},r.a.createElement(j.a,{className:t.bike}),n.available_bike_stands)),r.a.createElement(E.a,{item:!0,xs:6},r.a.createElement(x.a,{className:t.text,align:"center"},"Bikes"),r.a.createElement(x.a,{className:t.text,variant:"h6",align:"center"},r.a.createElement(w.a,{color:"primary"}),n.available_bikes))),r.a.createElement(E.a,{className:t.grid,container:!0,item:!0,xs:12},r.a.createElement(x.a,{className:t.text,variant:"caption"},"Other stations"),r.a.createElement(C,{stations:a,currentStationId:n.number,showCount:"6"}))),r.a.createElement(E.a,{className:t.grid,item:!0,xs:4},r.a.createElement(x.a,{align:"center",className:t.text},n.status),r.a.createElement(E.a,{container:!0,item:!0,xs:12},r.a.createElement(T,{bikeStands:n.bike_stands,availableBikes:n.available_bikes}))),r.a.createElement(E.a,{className:t.grid,item:!0,xs:12},r.a.createElement(x.a,{align:"center",variant:"caption"},"last updated -  14:30"))))}),I=a(83),_=a.n(I),z=a(84),B=a.n(z),A=function(){return r.a.createElement("div",{className:"currentLocation"},r.a.createElement(B.a,null))},D={styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#212121"},{lightness:17}]}]},K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).handleClick=a.handleClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleClick",value:function(){return this.props.viewStation(this.props.station)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root,onClick:this.handleClick})}}]),t}(n.Component),P=Object(y.withStyles)(function(e){return{root:{display:"block",width:"20px",height:"20px",background:"#64ffda",borderRadius:"20px"}}})(K),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).googleMapsApiKey=g.google_maps_api_key,a.updateStation=a.updateStation.bind(Object(h.a)(Object(h.a)(a))),a.state={station:"station",stations:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({station:this.state.stations[0]})}},{key:"updateStation",value:function(e){this.setState({station:e}),this.props.updateStation(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.center,n=t.zoom,i=t.stations;return r.a.createElement("div",null,r.a.createElement(_.a,{bootstrapURLKeys:{key:this.googleMapsApiKey},center:a,options:D,defaultZoom:n},r.a.createElement(A,{lat:a.lat,lng:a.lng}),i.map(function(t,a){return r.a.createElement(P,{key:a,viewStation:e.updateStation,lat:t.position.lat,lng:t.position.lng,station:t})})))}}]),t}(n.Component),L=a(1),R=function(e){var t=e.classes,a=e.stations,n=e.currentStation;return r.a.createElement("div",null,r.a.createElement(C,{className:t.root,stations:a,currentStationId:n.number,showCount:a.length}))};R.protoTypes={classes:a.n(L).a.object.isRequired};var U=Object(y.withStyles)(function(){return{root:{padding:"15px"}}})(R),q=a(38),J=a.n(q),W=Object(y.withStyles)(function(e){return{root:{maxHeight:"65px",padding:"5px",color:"#fff",position:"fixed",zIndex:5,width:"100%",top:0,background:e.palette.secondary.main,borderBottom:"solid 1px ".concat(e.palette.secondary.main800)}}})(function(e){var t=e.currentStation,a=e.classes;return r.a.createElement(E.a,{item:!0,xs:12,className:"header ".concat(a.root)},r.a.createElement(x.a,{align:"center",variant:"h5",color:"inherit"},t.address),r.a.createElement(x.a,{align:"center",variant:"subtitle1",color:"inherit"},r.a.createElement(J.a,{fontSize:"inherit"})," ",t.distance," km"))}),F=a(224),H=a(85),V=a.n(H),Z=a(40),$=a.n(Z),Q=a(87),X=a.n(Q),Y=a(86),ee=a.n(Y),te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return r.a.createElement(V.a,{value:t,onChange:this.handleChange,showLabels:!0,className:e.root},r.a.createElement($.a,{component:F.a,to:"/",label:"Near by",value:"Near by",icon:r.a.createElement(J.a,null)}),r.a.createElement($.a,{component:F.a,to:"/map",label:"map",value:"map",icon:r.a.createElement(ee.a,null)}),r.a.createElement($.a,{component:F.a,to:"/stations",label:"stations",value:"stations",icon:r.a.createElement(X.a,null)}))}}]),t}(r.a.Component),ae=Object(y.withStyles)({root:{width:"100%",position:"fixed",bottom:0,zIndex:1,height:"65px",boxShadow:"rgba(0, 0, 0, 0.3) 0px -1px 4px -1px"}})(te),ne=a(88),re=a.n(ne);var ie=Object(y.withStyles)(function(e){return{progress:{margin:2*e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(re.a,{className:t.progress,color:"secondary"}))}),oe=Object(y.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#64ffda"},secondary:{main:"#212121",main50:"#fafafa",main100:"#f5f5f5",main200:"#eeeeee",main300:"#e0e0e0",main400:"#bdbdbd",main500:"#9e9e9e",main600:"#757575",main700:"#616161",main800:"#424242"}}}),se=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).getStations=e.getStations.bind(Object(h.a)(Object(h.a)(e))),e.updateStation=e.updateStation.bind(Object(h.a)(Object(h.a)(e))),e.state={center:{},zoom:16,stations:[],station:""},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getGeolocation()}},{key:"getGeolocation",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e.getStations(t.coords.latitude,t.coords.longitude),e.setState({center:{lat:t.coords.latitude,lng:t.coords.longitude}})})}},{key:"updateStation",value:function(e){this.setState({station:e})}},{key:"getStations",value:function(){var e=Object(l.a)(s.a.mark(function e(t,a){var n,r,i,o,l,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.dbBaseUrl,r=g.dbContract,i=g.dbApiKey,e.next=3,fetch("".concat(n,"stations?contract=").concat(r,"&apiKey=").concat(i));case 3:return o=e.sent,e.next=6,o.json();case 6:l=e.sent,c=this.appendDistance(l,t,a),this.setState({stations:this.getClosest(c)});case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"appendDistance",value:function(e,t,a){var n=this;return e.map(function(e){return e.distance=n.distance(t,a,e.position.lat,e.position.lng,"K").toFixed(2),e})}},{key:"getClosest",value:function(e){var t=e.sort(function(e,t){return e.distance>t.distance?1:t.distance>e.distance?-1:0});return this.setState({station:t[0]}),t}},{key:"distance",value:function(e,t,a,n,r){if(e===a&&t===n)return 0;var i=Math.PI*e/180,o=Math.PI*a/180,s=t-n,l=Math.PI*s/180,c=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(l);return c>1&&(c=1),c=60*(c=180*(c=Math.acos(c))/Math.PI)*1.1515,"K"===r&&(c*=1.609344),"N"===r&&(c*=.8684),c}},{key:"render",value:function(){var e=this;return this.state.stations.length?r.a.createElement(y.MuiThemeProvider,{theme:oe},r.a.createElement(b.a,{basename:"/dublin-bike-locator"},r.a.createElement("div",{id:"wrapper"},r.a.createElement(W,{currentStation:this.state.station}),r.a.createElement("div",{className:"main"},r.a.createElement(f.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(M,Object.assign({},t,{stations:e.state.stations,currentStation:e.state.station}))}}),r.a.createElement(f.a,{path:"/map",render:function(t){return r.a.createElement(G,Object.assign({},t,{updateStation:e.updateStation,stations:e.state.stations,center:e.state.center,zoom:e.state.zoom}))}}),r.a.createElement(f.a,{path:"/stations",render:function(t){return r.a.createElement(U,Object.assign({},t,{stations:e.state.stations,currentStation:e.state.station}))}})),r.a.createElement(ae,null)))):r.a.createElement(y.MuiThemeProvider,{theme:oe},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(ie,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(221);var le=document.querySelector("#root");Object(i.render)(r.a.createElement(se,null),le),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},91:function(e,t,a){e.exports=a(223)}},[[91,2,1]]]);
//# sourceMappingURL=main.65b88000.chunk.js.map